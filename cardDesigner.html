<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="js/photobooth_min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" type="text/css" href="css/librarycard.css">

</head>
<body>
<div id="container" style="display:block;">
    <div class="card">
        <div class="logo"><img src = "img\logoslogo.png" class = "logoimg" style="width: 100%"></div>
        <div class="photo"></div>
        <div class="name">Input a Name</div>
        <div class="title">Staff</div>
        <div class="barcode"><img src = "http://services.asianhope.org/idcards/barcode.php?text=123&size=30" id = "barcodeimg" alt="blah"></div>
        <div class="barcodenumber">123</div>
        <div class="cardbody">
          <ul>
            <li id="dob">DOB: 15-08-1981</li>
            <li>Emergency Contact:</li>
            <li id="econtact1">017-XXX-XXXX</li>
            <li id="econtact2">024-XXX-XXXX</li>
          </ul>
        </div>
        <div class="footer"><img class="footerimg" src = "img\logoslibraryfooter.png" style="width: 100%"/> </div>
    </div>

</div>

<div id="controls" style="position: absolute; left: 600px;">
    <div id = "webcam" style="width:400px; height:288px;"></div>

    <input id="uploadFile" size=40 name="image" type="file" class="form-control"><br/>
    <label for "inputname">Name</label>
    <input type="text" id ="inputname" placeholder="Surname, First Name"/>
    <br/>
    <label for "inputtitle">Title</label>
    <input type="text" id ="inputtitle" placeholder="Staff"/>
    <br/>

    <label for "inputdob">DOB:</label>
    <input type="text" id ="inputdob" placeholder="DD-MM-YYYY"/>
    <br/>

    <label for "inputecontact1">Emergency Contact 1</label>
    <input type="text" id ="inputecontact1" placeholder="01X-XXX-XXX"/>
    <br/>

    <label for "inputecontact2">Emergency Contact 2</label>
    <input type="text" id ="inputecontact2" placeholder="02X-XXX-XXX"/>
    <br/>

    <label for "barcodenumber">Barcode Number</label>
    <input type ="text" id = "inputbarcodenumber" placeholder="123"/>
<div id="buttons">

<button id="library" class="btn btn-primary">LIS Library (Picture)</button>
<button id="library_bc" class="btn btn-primary">LIS Library (Barcode)</button><br/>
<button id="pickup" class="btn btn-primary">LIS Pick Up (Picture)</button>
<button id="pickup_bc" class="btn btn-primary">LIS Pick Up (Barcode)</button><br/>
<button id="staff" class="btn btn-primary">LIS Staff</button><br/>
<button id="student" class="btn btn-primary">LIS Student</button>
<button id="ah-staff" class="btn btn-primary">AH Staff</button>
<button id="vdp-staff" class="btn btn-primary">VDP Staff</button>
</div>
</div>




</body>
<script type='text/javascript'>
    var bcurl = "http://services.asianhope.org/idcards/barcode.php";
    var bcnum_pre = "";
    var bcnum_post= "";
    var bcsize = 30; //default size for barcodes.
    var departmnettag = "";

    //allows downloading of webcam picture
    function downloadURI(uri, name) {
        var link = document.createElement("a");
        link.download = name;
        link.href = uri;
        link.click();
    }

    $(function() {

    $('#webcam').photobooth().on("image",function(event, dataUrl){
        $('.photo').css('background-image','url('+dataUrl+')');
        var filename = $('#inputname').val()+'.png';
        downloadURI(dataUrl, filename);
    });
    $("#uploadFile").on("change", function()
        {
                var files = !!this.files ? this.files : [];
                if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support

                if (/^image/.test( files[0].type)){ // only image file
                    var reader = new FileReader(); // instance of the FileReader
                    reader.readAsDataURL(files[0]); // read the local file

                    reader.onloadend = function(){ // set image data as background of div
                        $(".photo").css("background-image", "url("+this.result+")");
                    }
                }
    });

    $('#library').click(function (){
      $('link').attr('href','css/librarycard.css');
      bcsize = 30;
      departmenttag = "";
      $('.footerimg').attr('src','img\\logoslibraryfooter.png');
    //  $('.card').css('background-color','#fbb033');
    });
    $('#library_bc').click(function (){
      bcnum_pre = "";
      bcnum_post= "";
      bcsize = 60;
      //reload barcode
      $('.barcode').html('<img src="'+bcurl+'?text='+$('#inputbarcodenumber').val()+'&size='+bcsize+'"/>');
      $('link').attr('href','css/librarybc.css');

      $('.footerimg').attr('src','img\\logoslibraryfooter.png');
      $('.logoimg').attr('src','img\\logoslibrarylogo.png');

    //  $('.card').css('background-color','#fbb033');
    });

    $('#pickup').click(function (){

      $('link').attr('href','css/pickupcard.css');
      bcsize = 30;
      departmenttag = "";
      $('.footerimg').attr('src','img\\logospickupfooter.png');


      //$('.card').css('background-color','#a02c2c');
    });
    $('#pickup_bc').click(function (){
      bcnum_pre = "";
      bcnum_post= "";
      bcsize = 60;
      //reload barcode
      $('.barcode').html('<img src="'+bcurl+'?text='+$('#inputbarcodenumber').val()+'&size='+bcsize+'"/>');
      $('link').attr('href','css/pickupbc.css');
      $('.footerimg').attr('src','img\\logospickupfooter.png');
      $('.logoimg').attr('src','img\\logospickuplogo.png');
    //  $('.card').css('background-color','#fbb033');
    });

    $('#staff').click(function (){
      bcnum_pre = "";
      bcnum_post= "";
      bcsize = 30;
      departmenttag ="";
      //reload barcode
      $('.barcode').html('<img src="'+bcurl+'?text='+$('#inputbarcodenumber').val()+'&size='+bcsize+'"/>');
      $('link').attr('href','css/staffcard.css');
      $('.footerimg').attr('src','img\\logosfooter.png');
      $('.logoimg').attr('src','img\\logoslogo.png');
    });

    $('#student').click(function (){
      bcnum_pre = "Student ID: <strong>";
      bcnum_post= "</strong>";
      bcsize = 30;
      departmenttag ="";
      $('link').attr('href','css/studentcard.css');
    });

    $('#ah-staff').click(function (){
      bcnum_pre = "";
      bcnum_post= "";
      bcsize = 30;
      departmenttag ="";
      //reload barcode
      $('.barcode').html('<img src="'+bcurl+'?text='+$('#inputbarcodenumber').val()+'&size='+bcsize+'"/>');
      $('link').attr('href','css/ahstaffcard.css');
      $('.footerimg').attr('src','img\\ahfooter.png');
      $('.logoimg').attr('src','img\\ahlogo.png');
    });

    $('#vdp-staff').click(function (){
      bcnum_pre = "";
      bcnum_post= "";
      bcsize = 30;
      departmenttag = "Village Development Program<br/>"
      //reload barcode
      $('.barcode').html('<img src="'+bcurl+'?text='+$('#inputbarcodenumber').val()+'&size='+bcsize+'"/>');
      $('link').attr('href','css/vdpstaffcard.css');
      $('.footerimg').attr('src','img\\vdpfooter.png');
      $('.logoimg').attr('src','img\\vdplogo.png');


    });

    $('#inputname').on("change", function(){
        $('.name').html($('#inputname').val());
    });
    $('#inputtitle').on("change", function(){
        $('.title').html(departmenttag+$('#inputtitle').val());
    });
    $('#inputecontact1').on("change", function(){
        $('#econtact1').html($('#inputecontact1').val());
    });

    $('#inputecontact2').on("change", function(){
        $('#econtact2').html($('#inputecontact2').val());
    });

    $('#inputdob').on("change", function(){
        $('#dob').html('DOB: '+$('#inputdob').val());
    });

    $('#inputbarcodenumber').on("change", function(){
        //$('#barcodeimg').attr('src',bcurl+'?'+$('#barcodenumber').val()+'&size=30');
        $('.barcodenumber').html(bcnum_pre+$('#inputbarcodenumber').val()+bcnum_post);
        $('.barcode').html('<img src="'+bcurl+'?text='+$('#inputbarcodenumber').val()+'&size='+bcsize+'"/>');


    });
});

</script>
</html>
